import{_ as a,c as s,o as i,a0 as t}from"./chunks/framework.8DCkquxJ.js";const n="/UF12/uf12/XAMPP.png",r="/UF12/uf12/descargar_driver_mySQL-connector.png",l="/UF12/uf12/new_driver.png",d="/UF12/uf12/new_driver2.png",o="/UF12/uf12/add_new_driver.png",c="/UF12/uf12/new_connection_wizard.png",p="/UF12/uf12/database_creada.png",h="/UF12/uf12/execute_command.png",m="/UF12/uf12/crear_database_prova.png",u="/UF12/uf12/crear_database_output.png",g="/UF12/uf12/taula_creada.png",k="/UF12/uf12/crear_taula_manualment.png",E="/UF12/uf12/inserir_dades.png",b="/UF12/uf12/consultar_valor.png",C=JSON.parse('{"title":"4. Accés a Base de dades des de NetBeans","description":"","frontmatter":{},"headers":[],"relativePath":"4-acces_netbeans.md","filePath":"4-acces_netbeans.md"}'),v={name:"4-acces_netbeans.md"};function x(y,e,q,_,F,f){return i(),s("div",null,e[0]||(e[0]=[t('<h1 id="_4-acces-a-base-de-dades-des-de-netbeans" tabindex="-1">4. Accés a Base de dades des de NetBeans <a class="header-anchor" href="#_4-acces-a-base-de-dades-des-de-netbeans" aria-label="Permalink to &quot;4. Accés a Base de dades des de NetBeans&quot;">​</a></h1><p>Sempre que vulguem treballar amb el servidor i les bases de dades del mateix haurem d&#39;iniciar l&#39;eina XAMPP descarregada anteriorment i iniciar els serveis Apache i MySQL/MariaDB:</p><div style="border:6px solid rgb(240, 102, 61);max-width:85%;margin:0 auto;text-align:center;"><img src="'+n+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><h2 id="_4-1-instal·lacio-del-jdbc-driver" tabindex="-1">4.1 Instal·lació del JDBC Driver <a class="header-anchor" href="#_4-1-instal·lacio-del-jdbc-driver" aria-label="Permalink to &quot;4.1 Instal·lació del JDBC Driver&quot;">​</a></h2><p>Per a poder connectar-se a una base de dades MySQL/MariaDB des de l&#39;explorador de NetBeans necessitem instal·lar el driver mysql-connector de Java. Primer cal descarregar-lo de l&#39;adreça web <a href="http://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noreferrer">http://dev.mysql.com/downloads/connector/j/</a> En l&#39;opció de sistema operatiu devem seleccionar &quot;Platform Independent&quot; i després descarregar el ZIP.</p><div style="border:6px solid rgb(240, 102, 61);max-width:100%;margin:0 auto;text-align:center;"><img src="'+r+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><p>No fa falta registrar-se per a descarregar-lo, només s’ha de prémer en “No thanks, just start my download.” Descomprimeix el ZIP i cerca l&#39;arxiu mysql-connector-java-9.2.0.jar. Tingues en compte que el número de versió pot ser diferent a la que es mostra en la imatge.</p><p>Ara <strong>obri NetBeans</strong>, veu al <strong>panell <code>Services</code> → <code>Databases</code></strong>, fes <strong>clic dret en l&#39;opció <code>Drivers</code></strong> i selecciona l&#39;opció <strong><code>New Driver</code></strong> del menú contextual. Es mostrarà el diàleg New JDBC Driver.</p><div style="display:flex;"><div style="flex:0.48;padding:10px;"><div style="border:6px solid rgb(240, 102, 61);max-width:100%;margin:0 auto;text-align:center;"><img src="'+l+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div></div><div style="flex:1;padding:10px;"><div style="border:6px solid rgb(240, 102, 61);max-width:100%;margin:0 auto;text-align:center;"><img src="'+d+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div></div></div><p>Fes clic en <code>Add...</code> i selecciona el fitxer <em>mysql-connector-java-9.2.0.jar</em> que has descarregat anteriorment. Una vegada seleccionat el fitxer ens ha d&#39;emplenar la classe principal del Driver que en el nostre cas ha de ser com.mysql.cj.jdbc.Driver i el nom del nostre driver, per exemple <em>MySQL (Connector/J driver)</em>.</p><div style="border:6px solid rgb(240, 102, 61);max-width:85%;margin:0 auto;text-align:center;"><img src="'+o+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><p></p><div class="note custom-block github-alert"><p class="custom-block-title"><strong>NOTA:</strong></p><p>Si estàs utilitzant l&#39;última versió de NetBeans <u>és possible que en <code>Services</code> → <code>Databases</code> → <code>Drivers</code> ja t&#39;aparega l&#39;opció ‘MySQL (Connector/J driver)’</u>. Malgrat això pot ser que necessites instal·lar el driver. Dona-li al driver amb clic dret → <code>Connect Using...</code> i comprova si en la finestra t&#39;apareix el missatge &quot;driver file is missing&quot;. En tal cas, dona-li a <code>Add driver</code> i selecciona l&#39;arxiu jar esmentat anteriorment.</p></div><p>Arribats a aquest punt ja tenim enllaçat el driver JDBC de MySQL/MariaDB des del Database Explorer. Ara el que ens queda és crear una connexió amb una base de dades MySQL/MariaDB.</p><h2 id="_4-2-connexio-a-base-de-dades-mitjancant-el-jdbc-driver" tabindex="-1">4.2 Connexió a base de Dades mitjançant el JDBC Driver <a class="header-anchor" href="#_4-2-connexio-a-base-de-dades-mitjancant-el-jdbc-driver" aria-label="Permalink to &quot;4.2 Connexió a base de Dades mitjançant el JDBC Driver&quot;">​</a></h2><p>Fes <strong>clic dret</strong> en <strong>MySQL (Connector/J driver)</strong> i selecciona l&#39;opció <code>Connect Using...</code>.</p><p>Apareixerà la finestra <code>New Connection Wizard</code>:</p><div style="border:6px solid rgb(240, 102, 61);max-width:90%;margin:0 auto;text-align:center;"><img src="'+c+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><ul><li><strong>Driver Name</strong>: El driver que volem utilitzar. En aquest cas <em>MySQL (Connector/J driver)</em>.</li><li><strong>Host</strong>: L&#39;adreça IP o nom de domini de la màquina on està instal·lat el servidor MySQL. En el nostre cas <em>localhost</em> (màquina local).</li><li><strong>Port</strong>: Port de connexió. MySQL utilitza el <em>3306</em> per defecte.</li><li><strong>Database</strong>: El nom de la base de dades a la qual volem accedir. Podem deixar aquest camp buit per a poder accedir a totes les que existisquen en el servidor.</li><li><strong>User Name</strong>: Nom d&#39;usuari. Utilitzarem <em>root</em> (administrador).</li><li><strong>Password</strong>: Contrasenya de l&#39;usuari. Ho deixarem en blanc ja que després d&#39;instal·lar MySQL la contrasenya per defecte està buida. En el nostre cas per a practicar i aprendre això serà suficient, però en un entorn real tindríem que configurar una contrasenya robusta.</li><li><strong>JDBC URL</strong>: La URL de connexió amb el format &quot;jdbc:mysql://HOST:PORT&quot; Es crea automàticament a partir de la informació anterior. És possible que incloga per defecte variables com ‘zeroDateTimeBehavior’ en la imatge.</li></ul><p>Fes clic en <code>Finalitzar</code>. Si tot va bé, en <code>Services</code> → <code>Databases</code> apareixerà una nova connexió anomenada <em>jdbc:mysql://localhost:3306… [root on Default schema]</em>.</p><div class="note custom-block github-alert"><p class="custom-block-title"><strong>NOTA:</strong></p><p>Si falla a causa d&#39;un error ‘server time zone’ pots solucionar-lo afegint a l&#39;URL la variable serverTimezone amb el valor UTC: <strong>jdbc:mysql://localhost:3306/?serverTimezone=UTC</strong></p></div><div style="border:6px solid rgb(240, 102, 61);max-width:90%;margin:0 auto;text-align:center;"><img src="'+p+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><p>Si despleguem la connexió creada veurem que podem accedir a totes les bases de dades, taules, etc. emmagatzemades en el servidor al qual estem connectats (a cadascú li apareixeran les bases de dades que tinga en el seu sistema, poden ser diferents a les de la imatge).</p><p><strong>Això és molt útil ja que ens permetrà accedir còmodament a la base de dades, realitzar consultes, executar comandos, etc. mentre desenvolupem un projecte amb NetBeans</strong>.</p><p>Per a executar un comando sobre la base de dades a la qual ens hem connectat només cal fer clic dret sobre la connexió i seleccionar l&#39;opció <code>Execute Command...</code>. S&#39;obrirà un panell en l&#39;editor central en el que podrem introduir sentències SQL (tantes com vulguem) i executar-les fent clic en la icona <strong><code>Run SQL</code></strong>:</p><div style="border:6px solid rgb(240, 102, 61);max-width:90%;margin:0 auto;text-align:center;"><img src="'+h+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><p></p><div style="border:6px solid rgb(240, 102, 61);max-width:90%;margin:0 auto;text-align:center;"><img src="'+m+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><p>Prova d&#39;executar la sentència <em>CREATE DATABASE prova;</em> com en la imatge. En el panell de baix es mostrarà un missatge amb el resultat de l&#39;execució.</p><div style="border:6px solid rgb(240, 102, 61);max-width:85%;margin:0 auto;text-align:center;"><img src="'+u+`" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><p>En aquest cas indica &quot;Executed successfully&quot; (s&#39;ha executat satisfactòriament). En la connexió JDBC del panell de l&#39;esquerra apareixerà la nova base de dades &quot;prova&quot; que hem creat.</p><p>Cal tindre en compte que com hem configurat aquesta connexió sense especificar cap base de dades concreta, si volguérem executar sentències sobre una base de dades de les disponibles hauríem d&#39;utilitzar sempre la sentència <em>USE nom_de_base_de_dades</em>. Per exemple:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tendaonline;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clients;</span></span></code></pre></div><p>Si treballarem habitualment sobre la mateixa base de dades i volem evitar haver d&#39;escriure sempre la sentència USE en totes les execucions de sentències SQL, podem crear una connexió configurada per a utilitzar una base de dades concreta. Per a això primer hauríem de seguir el mateix procediment explicat en aquest apartat (<strong>Clic dret en MySQL (Connector/J driver)</strong> → <code>Connect Using...</code> → <strong>Introduir les dades en el diàleg New Connection Wizard</strong> i en el camp <strong>Database</strong> escriure la base de dades desitjada).</p><p>En els següents apartats veurem alguns exemples d&#39;execució de sentències SQL utilitzant aquesta nova connexió a la base de dades &quot;prova&quot;.</p><h2 id="_4-3-crear-una-taula" tabindex="-1">4.3 Crear una taula <a class="header-anchor" href="#_4-3-crear-una-taula" aria-label="Permalink to &quot;4.3 Crear una taula&quot;">​</a></h2><p>Des del IDE de NetBeans podem crear taules de dues formes: per sentències SQL o utilitzant un assistent de creació de taules.</p><h3 id="_4-3-1-mitjancant-sentencies-sql" tabindex="-1">4.3.1 Mitjançant sentències SQL <a class="header-anchor" href="#_4-3-1-mitjancant-sentencies-sql" aria-label="Permalink to &quot;4.3.1 Mitjançant sentències SQL&quot;">​</a></h3><p>Seleccionem la connexió jdbc:mysql://localhost:3306/prova creada en l&#39;apartat anterior. Fem clic dret sobre ella → Execute Command... i introduïm el següent comando SQL:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prova;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> venedors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nom </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data_ingres </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;2000-01-01&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    salari </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FLOAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Si tot ha anat bé dins de ‘prova → Tables’ veurem la nova taula. És possible que necessitem fer clic dret → Refresh (sobre prova) perquè s’actualitze la informació.</p><div style="border:6px solid rgb(240, 102, 61);max-width:34%;margin:0 auto;text-align:center;"><img src="`+g+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><h3 id="_4-3-2-mitjancant-l-assistent-de-creacio-de-taules" tabindex="-1">4.3.2 Mitjançant l&#39;assistent de creació de taules <a class="header-anchor" href="#_4-3-2-mitjancant-l-assistent-de-creacio-de-taules" aria-label="Permalink to &quot;4.3.2 Mitjançant l&#39;assistent de creació de taules&quot;">​</a></h3><p>Sobre la carpeta &quot;Tables&quot; de la connexió desitjada, fem clic dret i triem <code>Create Table</code>. S&#39;obrirà l&#39;assistent de creació de taules. Afegim totes les columnes que necessitem mitjançant l&#39;opció <code>Add Column</code> (indicant les opcions de cada columna) i fem clic en <code>OK</code>.</p><div style="border:6px solid rgb(240, 102, 61);max-width:80%;margin:0 auto;text-align:center;"><img src="'+k+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><h2 id="_4-4-inserir-dades" tabindex="-1">4.4 Inserir dades <a class="header-anchor" href="#_4-4-inserir-dades" aria-label="Permalink to &quot;4.4 Inserir dades&quot;">​</a></h2><p>Executar el comando INSERT INTO… sobre la connexió desitjada. Per exemple:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> venedors </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Pedro Gil&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2017-04-11&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><div style="border:6px solid rgb(240, 102, 61);max-width:90%;margin:0 auto;text-align:center;"><img src="'+E+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div><h2 id="_4-5-consultar-valors" tabindex="-1">4.5 Consultar valors <a class="header-anchor" href="#_4-5-consultar-valors" aria-label="Permalink to &quot;4.5 Consultar valors&quot;">​</a></h2><p>Executar el comando SELECT… sobre la connexió desitjada. Per exemple:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> venedors;</span></span></code></pre></div><div style="border:6px solid rgb(240, 102, 61);max-width:90%;margin:0 auto;text-align:center;"><img src="'+b+'" style="max-width:100%;height:auto;margin:0;" alt="Esquema d&#39;herència"></div>',53)]))}const A=a(v,[["render",x]]);export{C as __pageData,A as default};
